{"version":3,"sources":["webpack:///./src/views/Cart.vue","webpack:///./src/views/Cart.vue?a8ae"],"names":["class","_createElementVNode","style","_hoisted_7","id","colspan","for","type","_createElementBlock","_hoisted_2","_hoisted_5","$data","carts","_Fragment","key","_renderList","item","onClick","$options","coupon","_hoisted_10","_toDisplayString","product","title","min","qty","$event","onBlur","unit","final_total","total","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_21","_hoisted_22","_createVNode","_component_Form","onSubmit","errors","_hoisted_28","_component_Field","name","placeholder","rules","user","email","_component_error_message","_hoisted_30","_component_ErrorMessage","_hoisted_32","tel","_hoisted_34","address","_hoisted_36","message","_hoisted_37","data","cart","form","mounted","this","getCart","methods","api","process","$http","get","then","res","catch","err","alert","updateCart","product_id","put","removeCartItem","delete","deleteAll","createOrder","order","post","$refs","resetForm","__exports__","render"],"mappings":"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","file":"assets/js/chunk-2d2102cc.0dcb3b50.js","sourcesContent":["<template>\r\n  \r\n  <div class=\"container\">\r\n    <h4 class=\"text-secondary mt-3\">\r\n      <i class=\"bi bi-cart-fill text-center fs-4 text-secondary\"></i>\r\n      購物車\r\n    </h4>\r\n\r\n    <div class=\"product-cart py-5\">\r\n      <table class=\"w-100\">\r\n        <thead>\r\n          <tr>\r\n            <th></th>\r\n            <th>品名</th>\r\n            <th style=\"width: 150px\">數量</th>\r\n            <th class=\"text-end\">單價</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <template v-if=\"cart.carts\">\r\n            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n              <td>\r\n                <button \r\n                  type=\"button\" \r\n                  class=\"close btn btn-outline-secondary\"\r\n                  @click=\"removeCartItem(item.id)\"\r\n                >\r\n                  <i class=\"fas fa-spinner fa-pulse\"></i>\r\n                  x\r\n                </button>\r\n              </td>\r\n              <td>\r\n                <div v-if=\"item.coupon\">已套用優惠券</div>\r\n                {{ item.product.title }}\r\n              </td>\r\n              <td>\r\n                <div class=\"input-group input-group-sm\">\r\n                  <div class=\"input-group mb-3\">\r\n                    <input \r\n                      min=\"1\" \r\n                      type=\"number\" \r\n                      class=\"form-control\"\r\n                      v-model.number=\"item.qty\"\r\n                      @blur=\"updateCart(item)\"\r\n                    >\r\n                    <span class=\"input-group-text\" id=\"basic-addon2\">{{ item.product.unit }}</span>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td class=\"text-end\">\r\n                <small class=\"text-success\" v-if=\"cart.final_total !== cart.total\">折扣價：</small>\r\n                {{ item.final_total }}\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td></td>\r\n              <td></td>\r\n              <td>總計</td>\r\n              <td class=\"text-end\">{{ cart.total }}</td>\r\n            </tr>\r\n            <tr v-if=\"cart.final_total !== cart.total\">\r\n              <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\r\n              <td class=\"text-end text-success\">{{ cart.final_total }}</td>\r\n            </tr>\r\n          </template>\r\n        </tbody>\r\n      </table>\r\n      <div class=\"mt-5 text-end\">\r\n        <button \r\n          type=\"button\" \r\n          class=\"btn btn-outline-danger\"\r\n          @click=\"deleteAll\"\r\n        >\r\n          清空購物車\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"order py-5\">\r\n      <div class=\"col-6 mx-auto\">\r\n        <Form \r\n          class=\"row g-3\"\r\n          v-slot=\"{ errors }\"\r\n          @submit=\"createOrder\"\r\n        >\r\n          <div class=\"col-md-12\">\r\n            <label for=\"email\" class=\"form-label\">Email</label>\r\n            <Field \r\n              type=\"email\"\r\n              name=\"email\"\r\n              class=\"form-control\" \r\n              id=\"email\" \r\n              placeholder=\"請輸入信箱\"\r\n              :class=\"{ 'is-invalid':errors['email'] }\"\r\n              rules=\"email|required\"\r\n              v-model=\"form.user.email\"\r\n            ></Field>\r\n            <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n          <div class=\"col-md-12\">\r\n            <label for=\"name\" class=\"form-label\">姓名</label>\r\n            <Field \r\n              type=\"text\"\r\n              name=\"姓名\"\r\n              class=\"form-control\" \r\n              id=\"name\" \r\n              placeholder=\"請輸入姓名\"\r\n              :class=\"{ 'is-invalid':errors['姓名'] }\"\r\n              rules=\"required\"\r\n              v-model=\"form.user.name\"\r\n            ></Field>\r\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\r\n          </div>\r\n          <div class=\"col-12\">\r\n            <label for=\"tel\" class=\"form-label\">電話</label>\r\n            <Field \r\n              type=\"text\"\r\n              name=\"電話\"\r\n              class=\"form-control\" \r\n              id=\"tel\" \r\n              placeholder=\"請輸入電話\"\r\n              :class=\"{ 'is-invalid':errors['電話'] }\"\r\n              rules=\"required\"\r\n              v-model=\"form.user.tel\"\r\n            ></Field>\r\n            <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\r\n          </div>\r\n          <div class=\"col-12\">\r\n            <label for=\"address\" class=\"form-label\">地址</label>\r\n            <Field \r\n              type=\"text\"\r\n              name=\"地址\"\r\n              class=\"form-control\" \r\n              id=\"address\" \r\n              placeholder=\"請輸入地址\"\r\n              :class=\"{ 'is-invalid':errors['地址'] }\"\r\n              rules=\"required\"\r\n              v-model=\"form.user.address\"\r\n            ></Field>\r\n            <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\r\n          </div>\r\n          <div class=\"col-12\">\r\n            <label for=\"message\" class=\"form-label\">留言</label>\r\n            <textarea \r\n              class=\"form-control\" \r\n              placeholder=\"請輸入留言\" \r\n              id=\"message\" \r\n              style=\"height: 200px\"\r\n              v-model=\"form.message\"\r\n            ></textarea>\r\n          </div>\r\n          <div class=\"col-12 text-end\">\r\n            <button type=\"submit\" class=\"btn btn-danger\">送出訂單</button>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n\r\n  \r\n\r\n\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      cart: [],\r\n      form: {\r\n        user: {\r\n          name: '',\r\n          email: \"\",\r\n          tel: \"\",\r\n          address: \"\",\r\n        },\r\n        message: '',\r\n      },\r\n      coupon: '',\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getCart();\r\n  },\r\n  methods: {\r\n    getCart() {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.$http.get(api)\r\n      .then((res) => {\r\n        this.cart = res.data.data;\r\n      })\r\n      .catch((err) => {\r\n        alert(err.data.message);\r\n      })\r\n    },\r\n    updateCart(data) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${data.id}`;\r\n      const cart = {\r\n        product_id: data.product_id,\r\n        qty: data.qty\r\n      };\r\n\r\n      this.$http.put(api, { data: cart })\r\n      .then((res) => {\r\n        alert(res.data.message);\r\n        this.getCart();\r\n      })\r\n      .catch((err) => {\r\n        alert(err.data.message);\r\n      })\r\n    },\r\n    removeCartItem(id) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n      this.$http.delete(api)\r\n      .then((res) => {\r\n        alert(res.data.message);\r\n        this.getCart();\r\n      })\r\n      .catch((err) => {\r\n        alert(err.data.message);\r\n      })\r\n    },\r\n    deleteAll() {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`\r\n      this.$http.delete(api)\r\n      .then((res) => {\r\n        alert(res.data.message);\r\n        this.getCart();\r\n      })\r\n      .catch((err) => {\r\n        alert(err.data.message);\r\n      })\r\n    },\r\n    createOrder() {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\r\n      const order = this.form;\r\n      this.$http.post(api, { data: order })\r\n      .then((res) => {\r\n        alert(res.data.message);\r\n        this.$refs.form.resetForm();\r\n      })\r\n      .catch((err) => {\r\n        alert(err.data.message);\r\n      })\r\n    },\r\n  },\r\n};\r\n</script>","import { render } from \"./Cart.vue?vue&type=template&id=0ef72a79\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\html\\\\六角學院\\\\vue-spring\\\\vue-week6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}