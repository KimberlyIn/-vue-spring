(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aabcc428"],{"6be2":function(t,e,a){"use strict";var c=function(t){return{all:t=t||new Map,on:function(e,a){var c=t.get(e);c?c.push(a):t.set(e,[a])},off:function(e,a){var c=t.get(e);c&&(a?c.splice(c.indexOf(a)>>>0,1):t.set(e,[]))},emit:function(e,a){var c=t.get(e);c&&c.slice().map((function(t){t(a)})),(c=t.get("*"))&&c.slice().map((function(t){t(e,a)}))}}},l=c();e["a"]=l},b789:function(t,e,a){"use strict";a.r(e);a("b0c0");var c=a("7a23"),l={class:"container text-center"},n=Object(c["h"])("h4",{class:"text-secondary mt-3"},[Object(c["h"])("i",{class:"bi bi-cart-fill text-center fs-4 text-secondary"}),Object(c["i"])(" 購物車 ")],-1),s={class:"product-cart py-5"},o={class:"w-100"},i=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th"),Object(c["h"])("th",null,"品名"),Object(c["h"])("th",{style:{width:"150px"}},"數量"),Object(c["h"])("th",{class:"text-end"},"單價")])],-1),r=["onClick","disabled"],d={key:0,class:"fas fa-spinner fa-pulse"},u=Object(c["i"])(" x "),b={key:0},m={class:"input-group input-group-sm"},h={class:"input-group mb-3"},j=["onUpdate:modelValue","onBlur"],O={class:"input-group-text",id:"basic-addon2"},f={class:"text-end"},p={key:0,class:"text-success"},g=Object(c["h"])("td",null,null,-1),v=Object(c["h"])("td",null,null,-1),y=Object(c["h"])("td",null,"總計",-1),x={class:"text-end"},k={key:0},V=Object(c["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),C={class:"text-end text-success"},L={class:"mt-5 text-end"},w={class:"order py-5"},S={class:"col-6 mx-auto"},q={class:"col-md-12"},I=Object(c["h"])("label",{for:"email",class:"form-label"},"Email",-1),J={class:"col-md-12"},U=Object(c["h"])("label",{for:"name",class:"form-label"},"姓名",-1),_={class:"col-12"},$=Object(c["h"])("label",{for:"tel",class:"form-label"},"電話",-1),G={class:"col-12"},M=Object(c["h"])("label",{for:"address",class:"form-label"},"地址",-1),A={class:"col-12"},E=Object(c["h"])("label",{for:"message",class:"form-label"},"留言",-1),F=Object(c["h"])("div",{class:"col-12 text-end"},[Object(c["h"])("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function B(t,e,a,B,R,z){var D=Object(c["G"])("Loading"),H=Object(c["G"])("Field"),K=Object(c["G"])("error-message"),N=Object(c["G"])("ErrorMessage"),P=Object(c["G"])("Form");return Object(c["y"])(),Object(c["g"])("div",l,[n,Object(c["h"])("div",s,[Object(c["j"])(D,{active:R.isLoading},null,8,["active"]),Object(c["h"])("table",o,[i,Object(c["h"])("tbody",null,[R.cart.carts?(Object(c["y"])(),Object(c["g"])(c["a"],{key:0},[(Object(c["y"])(!0),Object(c["g"])(c["a"],null,Object(c["E"])(R.cart.carts,(function(t){return Object(c["y"])(),Object(c["g"])("tr",{key:t.id},[Object(c["h"])("td",null,[Object(c["h"])("button",{type:"button",class:"close btn btn-outline-secondary",onClick:function(e){return z.removeCartItem(t.id)},disabled:R.loadingStatus.loadingItem===t.id},[R.loadingStatus.loadingItem===t.id?(Object(c["y"])(),Object(c["g"])("i",d)):Object(c["f"])("",!0),u],8,r)]),Object(c["h"])("td",null,[t.coupon?(Object(c["y"])(),Object(c["g"])("div",b,"已套用優惠券")):Object(c["f"])("",!0),Object(c["i"])(" "+Object(c["J"])(t.product.title),1)]),Object(c["h"])("td",null,[Object(c["h"])("div",m,[Object(c["h"])("div",h,[Object(c["S"])(Object(c["h"])("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":function(e){return t.qty=e},onBlur:function(e){return z.updateCart(t)}},null,40,j),[[c["M"],t.qty,void 0,{number:!0}]]),Object(c["h"])("span",O,Object(c["J"])(t.product.unit),1)])])]),Object(c["h"])("td",f,[R.cart.final_total!==R.cart.total?(Object(c["y"])(),Object(c["g"])("small",p,"折扣價：")):Object(c["f"])("",!0),Object(c["i"])(" "+Object(c["J"])(t.final_total),1)])])})),128)),Object(c["h"])("tr",null,[g,v,y,Object(c["h"])("td",x,Object(c["J"])(R.cart.total),1)]),R.cart.final_total!==R.cart.total?(Object(c["y"])(),Object(c["g"])("tr",k,[V,Object(c["h"])("td",C,Object(c["J"])(R.cart.final_total),1)])):Object(c["f"])("",!0)],64)):Object(c["f"])("",!0)])]),Object(c["h"])("div",L,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:e[0]||(e[0]=function(){return z.deleteAll&&z.deleteAll.apply(z,arguments)})}," 清空購物車 ")])]),Object(c["h"])("div",w,[Object(c["h"])("div",S,[Object(c["j"])(P,{ref:"form",class:"row g-3",onSubmit:z.createOrder},{default:Object(c["R"])((function(t){var a=t.errors;return[Object(c["h"])("div",q,[I,Object(c["j"])(H,{type:"email",name:"email",class:Object(c["r"])(["form-control",{"is-invalid":a["email"]}]),id:"email",placeholder:"請輸入信箱",rules:"email|required",modelValue:R.form.user.email,"onUpdate:modelValue":e[1]||(e[1]=function(t){return R.form.user.email=t})},null,8,["class","modelValue"]),Object(c["j"])(K,{name:"email",class:"invalid-feedback"})]),Object(c["h"])("div",J,[U,Object(c["j"])(H,{type:"text",name:"姓名",class:Object(c["r"])(["form-control",{"is-invalid":a["姓名"]}]),id:"name",placeholder:"請輸入姓名",rules:"required",modelValue:R.form.user.name,"onUpdate:modelValue":e[2]||(e[2]=function(t){return R.form.user.name=t})},null,8,["class","modelValue"]),Object(c["j"])(N,{name:"姓名",class:"invalid-feedback"})]),Object(c["h"])("div",_,[$,Object(c["j"])(H,{type:"text",name:"電話",class:Object(c["r"])(["form-control",{"is-invalid":a["電話"]}]),id:"tel",placeholder:"請輸入電話",rules:"required",modelValue:R.form.user.tel,"onUpdate:modelValue":e[3]||(e[3]=function(t){return R.form.user.tel=t})},null,8,["class","modelValue"]),Object(c["j"])(N,{name:"電話",class:"invalid-feedback"})]),Object(c["h"])("div",G,[M,Object(c["j"])(H,{type:"text",name:"地址",class:Object(c["r"])(["form-control",{"is-invalid":a["地址"]}]),id:"address",placeholder:"請輸入地址",rules:"required",modelValue:R.form.user.address,"onUpdate:modelValue":e[4]||(e[4]=function(t){return R.form.user.address=t})},null,8,["class","modelValue"]),Object(c["j"])(N,{name:"地址",class:"invalid-feedback"})]),Object(c["h"])("div",A,[E,Object(c["S"])(Object(c["h"])("textarea",{class:"form-control",placeholder:"請輸入留言",id:"message",style:{height:"200px"},"onUpdate:modelValue":e[5]||(e[5]=function(t){return R.form.message=t})},null,512),[[c["M"],R.form.message]])]),F]})),_:1},8,["onSubmit"])])])])}a("99af");var R=a("6be2"),z={data:function(){return{loadingStatus:{loadingItem:""},isLoading:!1,cart:[],form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon:""}},mounted:function(){this.getCart()},methods:{getCart:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("jemmanine","/cart");this.$http.get(e).then((function(e){t.cart=e.data.data,t.isLoading=!1})).catch((function(t){alert(t.data.message)}))},updateCart:function(t){var e=this,a="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("jemmanine","/cart/").concat(t.id),c={product_id:t.product_id,qty:t.qty};this.$http.put(a,{data:c}).then((function(t){alert(t.data.message),e.getCart()})).catch((function(t){alert(t.data.message)}))},removeCartItem:function(t){var e=this;this.isLoading=!0;var a="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("jemmanine","/cart/").concat(t);this.$http.delete(a).then((function(t){alert(t.data.message),e.getCart(),R["a"].emit("get-cart")})).catch((function(t){alert(t.data.message)})),this.loadingStatus.loadingItem="",this.isLoading=!1},deleteAll:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("jemmanine","/carts");this.$http.delete(e).then((function(e){alert(e.data.message),t.getCart(),R["a"].emit("get-cart")})).catch((function(t){alert(t.data.message)})),this.loadingStatus.loadingItem="",this.isLoading=!1},createOrder:function(){var t=this;this.isLoading=!0;var e="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("jemmanine","/order"),a=this.form;this.$http.post(e,{data:a}).then((function(e){alert(e.data.message),t.$refs.form.resetForm(),t.isLoading=!1})).catch((function(t){alert(t.data.message)}))}}},D=a("6b0d"),H=a.n(D);const K=H()(z,[["render",B]]);e["default"]=K}}]);
//# sourceMappingURL=chunk-aabcc428.797816d6.js.map