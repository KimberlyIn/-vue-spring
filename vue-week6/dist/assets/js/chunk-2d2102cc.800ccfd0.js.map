{"version":3,"sources":["webpack:///./src/views/Cart.vue","webpack:///./src/views/Cart.vue?a8ae"],"names":["class","_createElementVNode","style","id","colspan","for","type","_createElementBlock","_hoisted_2","_createVNode","_component_Loading","active","$data","_hoisted_5","carts","_Fragment","key","_renderList","item","onClick","$options","disabled","loadingItem","coupon","_hoisted_9","_toDisplayString","product","title","min","qty","$event","onBlur","unit","final_total","total","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_20","_hoisted_21","_component_Form","ref","onSubmit","errors","_hoisted_27","_component_Field","name","placeholder","rules","user","email","_component_error_message","_hoisted_29","_component_ErrorMessage","_hoisted_31","tel","_hoisted_33","address","_hoisted_35","message","_hoisted_36","data","loadingStatus","isLoading","cart","form","mounted","this","getCart","methods","api","process","$http","get","then","res","catch","err","alert","updateCart","product_id","put","removeCartItem","delete","deleteAll","createOrder","order","post","$refs","resetForm","__exports__","render"],"mappings":"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","file":"assets/js/chunk-2d2102cc.800ccfd0.js","sourcesContent":["<template>\r\n  <div class=\"container text-center\">\r\n    <h4 class=\"text-secondary mt-3\">\r\n      <i class=\"bi bi-cart-fill text-center fs-4 text-secondary\"></i>\r\n      購物車\r\n    </h4>\r\n\r\n    <div class=\"product-cart py-5\">\r\n      <Loading :active=\"isLoading\"></Loading>\r\n      <table class=\"w-100\">\r\n        <thead>\r\n          <tr>\r\n            <th></th>\r\n            <th>品名</th>\r\n            <th style=\"width: 150px\">數量</th>\r\n            <th class=\"text-end\">單價</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          <template v-if=\"cart.carts\">\r\n            <tr v-for=\"item in cart.carts\" :key=\"item.id\">\r\n              <td>\r\n                <button \r\n                  type=\"button\" \r\n                  class=\"close btn btn-outline-secondary\"\r\n                  @click=\"removeCartItem(item.id)\"\r\n                  :disabled=\"loadingStatus.loadingItem === item.id\"\r\n                >\r\n                  <i \r\n                    class=\"fas fa-spinner fa-pulse\"\r\n                    v-if=\"loadingStatus.loadingItem === item.id\"\r\n                  ></i>\r\n                  x\r\n                </button>\r\n              </td>\r\n              <td>\r\n                <div v-if=\"item.coupon\">已套用優惠券</div>\r\n                {{ item.product.title }}\r\n              </td>\r\n              <td>\r\n                <div class=\"input-group input-group-sm\">\r\n                  <div class=\"input-group mb-3\">\r\n                    <input \r\n                      min=\"1\" \r\n                      type=\"number\" \r\n                      class=\"form-control\"\r\n                      v-model.number=\"item.qty\"\r\n                      @blur=\"updateCart(item)\"\r\n                    >\r\n                    <span class=\"input-group-text\" id=\"basic-addon2\">{{ item.product.unit }}</span>\r\n                  </div>\r\n                </div>\r\n              </td>\r\n              <td class=\"text-end\">\r\n                <small class=\"text-success\" v-if=\"cart.final_total !== cart.total\">折扣價：</small>\r\n                {{ item.final_total }}\r\n              </td>\r\n            </tr>\r\n            <tr>\r\n              <td></td>\r\n              <td></td>\r\n              <td>總計</td>\r\n              <td class=\"text-end\">{{ cart.total }}</td>\r\n            </tr>\r\n            <tr v-if=\"cart.final_total !== cart.total\">\r\n              <td colspan=\"3\" class=\"text-end text-success\">折扣價</td>\r\n              <td class=\"text-end text-success\">{{ cart.final_total }}</td>\r\n            </tr>\r\n          </template>\r\n        </tbody>\r\n      </table>\r\n      <div class=\"mt-5 text-end\">\r\n        <button \r\n          type=\"button\" \r\n          class=\"btn btn-outline-danger\"\r\n          @click=\"deleteAll\"\r\n        >\r\n          清空購物車\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <div class=\"order py-5\">\r\n      <div class=\"col-6 mx-auto\">\r\n        <Form \r\n          ref=\"form\"\r\n          class=\"row g-3\"\r\n          v-slot=\"{ errors }\"\r\n          @submit=\"createOrder\"\r\n        >\r\n          <div class=\"col-md-12\">\r\n            <label for=\"email\" class=\"form-label\">Email</label>\r\n            <Field \r\n              type=\"email\"\r\n              name=\"email\"\r\n              class=\"form-control\" \r\n              id=\"email\" \r\n              placeholder=\"請輸入信箱\"\r\n              :class=\"{ 'is-invalid':errors['email'] }\"\r\n              rules=\"email|required\"\r\n              v-model=\"form.user.email\"\r\n            ></Field>\r\n            <error-message name=\"email\" class=\"invalid-feedback\"></error-message>\r\n          </div>\r\n          <div class=\"col-md-12\">\r\n            <label for=\"name\" class=\"form-label\">姓名</label>\r\n            <Field \r\n              type=\"text\"\r\n              name=\"姓名\"\r\n              class=\"form-control\" \r\n              id=\"name\" \r\n              placeholder=\"請輸入姓名\"\r\n              :class=\"{ 'is-invalid':errors['姓名'] }\"\r\n              rules=\"required\"\r\n              v-model=\"form.user.name\"\r\n            ></Field>\r\n            <ErrorMessage name=\"姓名\" class=\"invalid-feedback\"></ErrorMessage>\r\n          </div>\r\n          <div class=\"col-12\">\r\n            <label for=\"tel\" class=\"form-label\">電話</label>\r\n            <Field \r\n              type=\"text\"\r\n              name=\"電話\"\r\n              class=\"form-control\" \r\n              id=\"tel\" \r\n              placeholder=\"請輸入電話\"\r\n              :class=\"{ 'is-invalid':errors['電話'] }\"\r\n              rules=\"required\"\r\n              v-model=\"form.user.tel\"\r\n            ></Field>\r\n            <ErrorMessage name=\"電話\" class=\"invalid-feedback\"></ErrorMessage>\r\n          </div>\r\n          <div class=\"col-12\">\r\n            <label for=\"address\" class=\"form-label\">地址</label>\r\n            <Field \r\n              type=\"text\"\r\n              name=\"地址\"\r\n              class=\"form-control\" \r\n              id=\"address\" \r\n              placeholder=\"請輸入地址\"\r\n              :class=\"{ 'is-invalid':errors['地址'] }\"\r\n              rules=\"required\"\r\n              v-model=\"form.user.address\"\r\n            ></Field>\r\n            <ErrorMessage name=\"地址\" class=\"invalid-feedback\"></ErrorMessage>\r\n          </div>\r\n          <div class=\"col-12\">\r\n            <label for=\"message\" class=\"form-label\">留言</label>\r\n            <textarea \r\n              class=\"form-control\" \r\n              placeholder=\"請輸入留言\" \r\n              id=\"message\" \r\n              style=\"height: 200px\"\r\n              v-model=\"form.message\"\r\n            ></textarea>\r\n          </div>\r\n          <div class=\"col-12 text-end\">\r\n            <button \r\n              type=\"submit\" \r\n              class=\"btn btn-danger\"\r\n            >送出訂單</button>\r\n          </div>\r\n        </Form>\r\n      </div>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {\r\n      loadingStatus: {\r\n        loadingItem: '',\r\n      },\r\n      isLoading: false,\r\n      cart: [],\r\n      form: {\r\n        user: {\r\n          name: '',\r\n          email: \"\",\r\n          tel: \"\",\r\n          address: \"\",\r\n        },\r\n        message: '',\r\n      },\r\n      coupon: '',\r\n    };\r\n  },\r\n  mounted() {\r\n    this.getCart();\r\n  },\r\n  methods: {\r\n    getCart() {\r\n      this.isLoading = true;\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart`;\r\n      this.$http.get(api)\r\n      .then((res) => {\r\n        this.cart = res.data.data;\r\n        this.isLoading = false;\r\n      })\r\n      .catch((err) => {\r\n        alert(err.data.message);\r\n      })\r\n    },\r\n    updateCart(data) {\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${data.id}`;\r\n      const cart = {\r\n        product_id: data.product_id,\r\n        qty: data.qty\r\n      };\r\n\r\n      this.$http.put(api, { data: cart })\r\n      .then((res) => {\r\n        alert(res.data.message);\r\n        this.getCart();\r\n      })\r\n      .catch((err) => {\r\n        alert(err.data.message);\r\n      })\r\n    },\r\n    removeCartItem(id) {\r\n      this.isLoading = true;\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/cart/${id}`;\r\n      this.$http.delete(api)\r\n      .then((res) => {\r\n        alert(res.data.message);\r\n        this.getCart();\r\n      })\r\n      .catch((err) => {\r\n        alert(err.data.message);\r\n      });\r\n      this.loadingStatus.loadingItem = \"\";\r\n      this.isLoading = false;\r\n    },\r\n    deleteAll() {\r\n      this.isLoading = true;\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/carts`\r\n      this.$http.delete(api)\r\n      .then((res) => {\r\n        alert(res.data.message);\r\n        this.getCart();\r\n      })\r\n      .catch((err) => {\r\n        alert(err.data.message);\r\n      });\r\n      this.loadingStatus.loadingItem = \"\";\r\n      this.isLoading = false;\r\n    },\r\n    createOrder() {\r\n      this.isLoading = true;\r\n      const api = `${process.env.VUE_APP_API}api/${process.env.VUE_APP_PATH}/order`;\r\n      const order = this.form;\r\n      this.$http.post(api, { data: order })\r\n      .then((res) => {\r\n        alert(res.data.message);\r\n        this.$refs.form.resetForm();\r\n        this.isLoading = false;\r\n      })\r\n      .catch((err) => {\r\n        alert(err.data.message);\r\n      });\r\n    },\r\n  },\r\n};\r\n</script>","import { render } from \"./Cart.vue?vue&type=template&id=6490af7f\"\nimport script from \"./Cart.vue?vue&type=script&lang=js\"\nexport * from \"./Cart.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"D:\\\\html\\\\六角學院\\\\vue-spring\\\\vue-week6\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}