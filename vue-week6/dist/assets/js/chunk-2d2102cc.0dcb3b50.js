(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d2102cc"],{b789:function(e,t,a){"use strict";a.r(t);a("b0c0");var c=a("7a23"),l={class:"container"},n=Object(c["h"])("h4",{class:"text-secondary mt-3"},[Object(c["h"])("i",{class:"bi bi-cart-fill text-center fs-4 text-secondary"}),Object(c["i"])(" 購物車 ")],-1),s={class:"product-cart py-5"},r={class:"w-100"},o=Object(c["h"])("thead",null,[Object(c["h"])("tr",null,[Object(c["h"])("th"),Object(c["h"])("th",null,"品名"),Object(c["h"])("th",{style:{width:"150px"}},"數量"),Object(c["h"])("th",{class:"text-end"},"單價")])],-1),i=["onClick"],u=Object(c["h"])("i",{class:"fas fa-spinner fa-pulse"},null,-1),d=Object(c["i"])(" x "),b=[u,d],m={key:0},j={class:"input-group input-group-sm"},h={class:"input-group mb-3"},O=["onUpdate:modelValue","onBlur"],f={class:"input-group-text",id:"basic-addon2"},p={class:"text-end"},v={key:0,class:"text-success"},g=Object(c["h"])("td",null,null,-1),y=Object(c["h"])("td",null,null,-1),x=Object(c["h"])("td",null,"總計",-1),k={class:"text-end"},V={key:0},C=Object(c["h"])("td",{colspan:"3",class:"text-end text-success"},"折扣價",-1),w={class:"text-end text-success"},q={class:"mt-5 text-end"},J={class:"order py-5"},U={class:"col-6 mx-auto"},_={class:"col-md-12"},$=Object(c["h"])("label",{for:"email",class:"form-label"},"Email",-1),G={class:"col-md-12"},S=Object(c["h"])("label",{for:"name",class:"form-label"},"姓名",-1),A={class:"col-12"},E=Object(c["h"])("label",{for:"tel",class:"form-label"},"電話",-1),F={class:"col-12"},M=Object(c["h"])("label",{for:"address",class:"form-label"},"地址",-1),B={class:"col-12"},I=Object(c["h"])("label",{for:"message",class:"form-label"},"留言",-1),R=Object(c["h"])("div",{class:"col-12 text-end"},[Object(c["h"])("button",{type:"submit",class:"btn btn-danger"},"送出訂單")],-1);function z(e,t,a,u,d,z){var D=Object(c["G"])("Field"),H=Object(c["G"])("error-message"),K=Object(c["G"])("ErrorMessage"),L=Object(c["G"])("Form");return Object(c["y"])(),Object(c["g"])("div",l,[n,Object(c["h"])("div",s,[Object(c["h"])("table",r,[o,Object(c["h"])("tbody",null,[d.cart.carts?(Object(c["y"])(),Object(c["g"])(c["a"],{key:0},[(Object(c["y"])(!0),Object(c["g"])(c["a"],null,Object(c["E"])(d.cart.carts,(function(e){return Object(c["y"])(),Object(c["g"])("tr",{key:e.id},[Object(c["h"])("td",null,[Object(c["h"])("button",{type:"button",class:"close btn btn-outline-secondary",onClick:function(t){return z.removeCartItem(e.id)}},b,8,i)]),Object(c["h"])("td",null,[e.coupon?(Object(c["y"])(),Object(c["g"])("div",m,"已套用優惠券")):Object(c["f"])("",!0),Object(c["i"])(" "+Object(c["J"])(e.product.title),1)]),Object(c["h"])("td",null,[Object(c["h"])("div",j,[Object(c["h"])("div",h,[Object(c["S"])(Object(c["h"])("input",{min:"1",type:"number",class:"form-control","onUpdate:modelValue":function(t){return e.qty=t},onBlur:function(t){return z.updateCart(e)}},null,40,O),[[c["M"],e.qty,void 0,{number:!0}]]),Object(c["h"])("span",f,Object(c["J"])(e.product.unit),1)])])]),Object(c["h"])("td",p,[d.cart.final_total!==d.cart.total?(Object(c["y"])(),Object(c["g"])("small",v,"折扣價：")):Object(c["f"])("",!0),Object(c["i"])(" "+Object(c["J"])(e.final_total),1)])])})),128)),Object(c["h"])("tr",null,[g,y,x,Object(c["h"])("td",k,Object(c["J"])(d.cart.total),1)]),d.cart.final_total!==d.cart.total?(Object(c["y"])(),Object(c["g"])("tr",V,[C,Object(c["h"])("td",w,Object(c["J"])(d.cart.final_total),1)])):Object(c["f"])("",!0)],64)):Object(c["f"])("",!0)])]),Object(c["h"])("div",q,[Object(c["h"])("button",{type:"button",class:"btn btn-outline-danger",onClick:t[0]||(t[0]=function(){return z.deleteAll&&z.deleteAll.apply(z,arguments)})}," 清空購物車 ")])]),Object(c["h"])("div",J,[Object(c["h"])("div",U,[Object(c["j"])(L,{class:"row g-3",onSubmit:z.createOrder},{default:Object(c["R"])((function(e){var a=e.errors;return[Object(c["h"])("div",_,[$,Object(c["j"])(D,{type:"email",name:"email",class:Object(c["r"])(["form-control",{"is-invalid":a["email"]}]),id:"email",placeholder:"請輸入信箱",rules:"email|required",modelValue:d.form.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return d.form.user.email=e})},null,8,["class","modelValue"]),Object(c["j"])(H,{name:"email",class:"invalid-feedback"})]),Object(c["h"])("div",G,[S,Object(c["j"])(D,{type:"text",name:"姓名",class:Object(c["r"])(["form-control",{"is-invalid":a["姓名"]}]),id:"name",placeholder:"請輸入姓名",rules:"required",modelValue:d.form.user.name,"onUpdate:modelValue":t[2]||(t[2]=function(e){return d.form.user.name=e})},null,8,["class","modelValue"]),Object(c["j"])(K,{name:"姓名",class:"invalid-feedback"})]),Object(c["h"])("div",A,[E,Object(c["j"])(D,{type:"text",name:"電話",class:Object(c["r"])(["form-control",{"is-invalid":a["電話"]}]),id:"tel",placeholder:"請輸入電話",rules:"required",modelValue:d.form.user.tel,"onUpdate:modelValue":t[3]||(t[3]=function(e){return d.form.user.tel=e})},null,8,["class","modelValue"]),Object(c["j"])(K,{name:"電話",class:"invalid-feedback"})]),Object(c["h"])("div",F,[M,Object(c["j"])(D,{type:"text",name:"地址",class:Object(c["r"])(["form-control",{"is-invalid":a["地址"]}]),id:"address",placeholder:"請輸入地址",rules:"required",modelValue:d.form.user.address,"onUpdate:modelValue":t[4]||(t[4]=function(e){return d.form.user.address=e})},null,8,["class","modelValue"]),Object(c["j"])(K,{name:"地址",class:"invalid-feedback"})]),Object(c["h"])("div",B,[I,Object(c["S"])(Object(c["h"])("textarea",{class:"form-control",placeholder:"請輸入留言",id:"message",style:{height:"200px"},"onUpdate:modelValue":t[5]||(t[5]=function(e){return d.form.message=e})},null,512),[[c["M"],d.form.message]])]),R]})),_:1},8,["onSubmit"])])])])}a("99af");var D={data:function(){return{cart:[],form:{user:{name:"",email:"",tel:"",address:""},message:""},coupon:""}},mounted:function(){this.getCart()},methods:{getCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("jemmanine","/cart");this.$http.get(t).then((function(t){e.cart=t.data.data})).catch((function(e){alert(e.data.message)}))},updateCart:function(e){var t=this,a="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("jemmanine","/cart/").concat(e.id),c={product_id:e.product_id,qty:e.qty};this.$http.put(a,{data:c}).then((function(e){alert(e.data.message),t.getCart()})).catch((function(e){alert(e.data.message)}))},removeCartItem:function(e){var t=this,a="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("jemmanine","/cart/").concat(e);this.$http.delete(a).then((function(e){alert(e.data.message),t.getCart()})).catch((function(e){alert(e.data.message)}))},deleteAll:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("jemmanine","/carts");this.$http.delete(t).then((function(t){alert(t.data.message),e.getCart()})).catch((function(e){alert(e.data.message)}))},createOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2/","api/").concat("jemmanine","/order"),a=this.form;this.$http.post(t,{data:a}).then((function(t){alert(t.data.message),e.$refs.form.resetForm()})).catch((function(e){alert(e.data.message)}))}}},H=a("6b0d"),K=a.n(H);const L=K()(D,[["render",z]]);t["default"]=L}}]);
//# sourceMappingURL=chunk-2d2102cc.0dcb3b50.js.map