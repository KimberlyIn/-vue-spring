(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d22c48a"],{f329:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),a=Object(n["createElementVNode"])("div",{class:"text-end mt-4 mx-5"},[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-secondary"},"建立新的優惠券")],-1),c={class:"px-3"},s={class:"table table-hover mt-4"},l=Object(n["createElementVNode"])("thead",null,[Object(n["createElementVNode"])("tr",null,[Object(n["createElementVNode"])("th",null,"名稱"),Object(n["createElementVNode"])("th",null,"折扣百分比"),Object(n["createElementVNode"])("th",null,"到期日"),Object(n["createElementVNode"])("th",null,"是否啟用"),Object(n["createElementVNode"])("th",null,"編輯")])],-1),d={key:0,class:"text-success"},i={key:1,class:"text-secondary"},u=Object(n["createElementVNode"])("td",null,[Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-secondary border-end-0 rounded-0"}," 編輯 "),Object(n["createElementVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-danger rounded-0"}," 刪除 ")],-1);function r(e,t,o,r,p,b){var m=Object(n["resolveComponent"])("Loading");return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("div",null,[Object(n["createVNode"])(m,{actuve:p.isLoading,"z-index":1060},null,8,["actuve"]),a,Object(n["createElementVNode"])("div",c,[Object(n["createElementVNode"])("table",s,[l,Object(n["createElementVNode"])("tbody",null,[(Object(n["openBlock"])(!0),Object(n["createElementBlock"])(n["Fragment"],null,Object(n["renderList"])(p.coupons,(function(t,o){return Object(n["openBlock"])(),Object(n["createElementBlock"])("tr",{key:o},[Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.title),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(t.percent),1),Object(n["createElementVNode"])("td",null,Object(n["toDisplayString"])(e.$filters.date(t.due_date)),1),Object(n["createElementVNode"])("td",null,[1===t.is_enabled?(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",d,"啟用")):(Object(n["openBlock"])(),Object(n["createElementBlock"])("span",i,"不啟用"))]),u])})),128))])])])])])}var p=o("5530"),b=(o("99af"),{class:"modal fade",id:"couponModal",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}),m=Object(n["createStaticVNode"])('<div class="modal-dialog"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="exampleModalLabel">Modal title</h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"> ... </div><div class="modal-footer"><button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button><button type="button" class="btn btn-primary">Save changes</button></div></div></div>',1),h=[m];function j(e,t,o,a,c,s){return Object(n["openBlock"])(),Object(n["createElementBlock"])("div",null,[Object(n["createElementVNode"])("div",b,h,512)])}var v=o("e0ae"),O={props:{coupon:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!1}},data:function(){return{tempCoupon:{},due_data:""}},emits:["get-coupon"],mixins:[v["a"]],watch:{coupon:function(){this.tempCoupon=this.coupon;new date(this.tempCoupon.due_data/1e3)}}},f=o("6b0d"),g=o.n(f);const N=g()(O,[["render",j]]);var E=N,V=o("cc52"),y={data:function(){return{coupons:{},tempCoupon:{title:"",is_enabled:0,percent:100,code:""},isLoading:!1,isNew:!1}},components:{CouponModal:E,DeleteProduct:V["a"]},methods:{openCouponModal:function(e,t){this.isNew=e,this.isNew?this.tempCoupon={due_data:(new Date).getTime()/1e3}:this.tempCoupon=Object(p["a"])({},t),this.$refs.couponMosal.openModal()},getCoupons:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("jemmanine","/admin/coupons");this.$http.get(t).then((function(t){e.coupons=t.data.coupons,e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))},updateCoupons:function(e){var t=this;this.isLoading=!0;var o="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("jemmanine","/admin/coupon"),n="post",a=e;this.isNew||(o="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("jemmanine","/admin/coupon/").concat(this.tempCoupon.id),n="put",a=this.tempCoupon),this.$http[n](o,{data:a}).then((function(){t.isLoading=!1,t.$httpMessageState(response,"新增優惠券");var e=t.$refs.couponModal;e.hideModal(),t.getCoupons()})).catch((function(e){t.isLoading=!1,t.$httpMessageState(e.response,"錯誤訊息")}))},delCoupon:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("jemmanine","/admin/coupon/").concat(this.tempCoupon.id);this.$http.delete(t).then((function(t){e.isLoading=!1,e.$httpMessageState(t,"刪除優惠券");var o=e.$refs.deleteProduct;o.heidModal(),e.getCoupons()})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))}},created:function(){this.getCoupons()}};const C=g()(y,[["render",r]]);t["default"]=C}}]);
//# sourceMappingURL=chunk-2d22c48a.ec52e786.js.map