(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4856"],{"3ad6":function(e,t,c){"use strict";c.r(t);c("a4d3"),c("e01a");var a=c("7a23"),l={class:"text-end mt-4 mx-5"},n={class:"px-3"},o={class:"table table-hover mt-4"},i=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",null,[Object(a["createElementVNode"])("th",{width:"200"},"標題"),Object(a["createElementVNode"])("th",{width:"200"},"作者"),Object(a["createElementVNode"])("th",null,"描述"),Object(a["createElementVNode"])("th",{width:"150"},"建立時間"),Object(a["createElementVNode"])("th",{width:"150"},"是否公開"),Object(a["createElementVNode"])("th",{width:"150"},"編輯")])],-1),s={key:0,class:"text-success"},r={key:1,class:"text-secondary"},d=["onClick"],u=["onClick"];function b(e,t,c,b,p,m){var h=Object(a["resolveComponent"])("ArticleModal"),v=Object(a["resolveComponent"])("DeleteProduct");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("div",l,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-secondary",onClick:t[0]||(t[0]=function(e){return m.openModal(!0)})}," 建立新的頁面 ")]),Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("table",o,[i,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(p.articles,(function(t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:t.id},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.title),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.author),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(t.description),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.$filters.date(t.create_at)),1),Object(a["createElementVNode"])("td",null,[t.isPublic?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",s,"已上架")):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",r,"未上架"))]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-secondary border-end-0 rounded-0",onClick:function(e){return m.getArticle(t.id)}}," 編輯 ",8,d),Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-danger rounded-0",onClick:function(e){return m.openDelModal(t)}}," 刪除 ",8,u)])])})),128))])]),Object(a["createVNode"])(h,{article:p.tempArticle,isNew:p.isNew,onGetArticle:m.updateArticle,ref:"articleModal"},null,8,["article","isNew","onGetArticle"]),Object(a["createVNode"])(v,{item:p.tempArticle,onDelProduct:m.delArticle,ref:"deleteProduct"},null,8,["item","onDelProduct"])])])])}var p=c("5530"),m=(c("99af"),c("cc52")),h={class:"modal fade",id:"articleModal",ref:"modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"},v=Object(a["createStaticVNode"])('<div class="modal-dialog"><div class="modal-content"><div class="modal-header bg-dark"><h5 class="modal-title text-light" id="exampleModalLabel"><span>新增優惠卷</span><span>編輯貼文</span></h5><button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button></div><div class="modal-body"><div class="row"><div class="col-4"></div></div><div><div class="col-12 mb-3"><label for="title" class="form-label">標題</label><input type="text" class="form-control" id="title" placeholder="請輸入標題"></div><div class="col-12 mb-3"><label for="coupon-code" class="form-label">優惠碼</label><input type="text" class="form-control" id="coupon-code" placeholder="請輸入優惠碼"></div><div class="col-12 mb-3"><label for="due_date" class="form-label">到期日</label><input type="date" class="form-control" id="due_date"></div><div class="col-12 mb-3"><label for="percent" class="form-label">折扣百分比</label><input type="number" class="form-control" id="percent" placeholder="請輸入折扣百分比"></div><div class="form-check"><input class="form-check-input" type="checkbox" id="is_enabled"><label class="form-check-label" for="is_enabled"> 是否啟用 </label></div></div></div><div class="modal-footer"><button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">取消</button><button type="button" class="btn btn-secondary"> isNew ? &#39;新增商品&#39;: &#39;更新優惠券&#39; </button></div></div></div>',1),f=[v];function g(e,t,c,l,n,o){return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",null,[Object(a["createElementVNode"])("div",h,f,512)])}var j=c("e0ae"),O={props:{article:{type:Object,default:function(){return{}}},isNew:{type:Boolean,default:!0}},data:function(){},emitter:["get-article"],mixins:[j["a"]]},N=c("6b0d"),y=c.n(N);const E=y()(O,[["render",g]]);var k=E,V={data:function(){return{isLoading:!1,isNew:!1,articles:[],tempArticle:{},articleData:{title:"",create_at:0,author:"",isPublic:!0,content:""},currentPage:1}},inject:["emitter"],components:{DeleteProduct:m["a"],ArticleModal:k},methods:{getArticles:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.currentPage=t;var c="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("jemmanine","/admin/articles?page=").concat(t);this.isLoading=!0,this.$http.get(c).then((function(t){e.isLoading=!1,e.articles=t.data.articles,e.pagination=t.data.pagination})).catch((function(t){e.isLoading=!1,console.log("error",t.response,t.request,t.message),e.isLoading=!1,e.emitter.$emit("push-message",{title:"連線錯誤",style:"danger",content:t.message})}))},getArticle:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("jemmanine","/admin/article/").concat(e);this.isLoading=!0,this.$http.get(c).then((function(e){t.openModal(!1,e.data.article),t.isNew=!1})).catch((function(e){console.log("error",e.response,e.request,e.message),t.isLoading=!1,t.emitter.emit("push-message",{title:"連線錯誤",style:"danger",content:e.message})}))},openModal:function(e,t){e?(this.tempArticle={isPublic:!1,create_at:(new Date).getTime()/1e3,tag:[]},this.isNew=!0):(this.tempArticle=Object(p["a"])({},t),this.isNew=!1),this.$refs.articleModal.openModal()},updateArticle:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("jemmanine","/admin/article"),c="post",a=this.articleData,l="新增文章";this.isNew||(t="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("jemmanine","/admin/article/").concat(this.tempArticle.id),c="put",a=this.articleData,l="更新貼文"),this.$http[c](t,{data:a}).then((function(){e.isLoading=!1,e.$httpMessageState(response,l),e.$refs.articleModal.openModal(),e.getArticles(e.currentPage)})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))},openDelModal:function(e){this.tempArticle=Object(p["a"])({},e),this.$refs.deleteProduct.openModal()},delArticle:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("jemmanine","/admin/article/").concat(this.tempArticle.id);this.isLoading=!0,this.$http.delete(t).then((function(t){e.isLoading=!1,e.$refs.deleteProduct.openModal(),e.$httpMessageState(t,"刪除成功"),e.getArticles(e.currentPage)})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"刪除貼文")}))}},created:function(){this.getArticles()}};const w=y()(V,[["render",b]]);t["default"]=w}}]);
//# sourceMappingURL=chunk-2d0c4856.c72d5d81.js.map